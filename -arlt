diff --git a/config/def.yaml b/config/def.yaml
index 6e0859d..e6ca25f 100644
--- a/config/def.yaml
+++ b/config/def.yaml
@@ -1,4 +1,4 @@
-log_directory: /home/kaipak/datasets/report_service/logs/final
+log_directory: /report_service/logs/final
 node_dirs: [geo]
 profile_name: saml-pub
 s3_bucket: pds-web-analytics-cloud
diff --git a/scripts/s3_log_sync.py b/scripts/s3_log_sync.py
index 0251c3c..6d30af4 100644
--- a/scripts/s3_log_sync.py
+++ b/scripts/s3_log_sync.py
@@ -6,27 +6,21 @@
 import boto3
 from box import Box
 import yaml
-import re
-import os
-import time
-from multiprocessing import Process
-
+import io
 import os
+import re
 import sys
 import boto3
 from boto3.s3.transfer import TransferConfig
 from tqdm import tqdm
-import boto3
-import os
 import time
 from multiprocessing import Process
-from tqdm import tqdm
-import io
 
 
 class S3Sync:
-    def __init__(self, local_dirs, bucket_name, s3_prefix, profile_name):
+    def __init__(self, local_dirs, bucket_name, s3_prefix, profile_name, log_dir):
         self.local_dirs = local_dirs
+        self.log_dir = log_dir
         self.bucket_name = bucket_name
         self.s3_prefix = s3_prefix
         self.profile_name = profile_name
@@ -61,7 +55,7 @@ class S3Sync:
         progress_bar = tqdm(total=total_size, unit='B', unit_scale=True, desc=f"Uploading {local_dir}")
         start_time = time.time()
         for local_file in files_to_sync:
-            s3_key = os.path.join(self.s3_prefix, os.path.relpath(local_file, local_dir))
+            s3_key = os.path.join(self.s3_prefix, os.path.relpath(local_file, self.log_dir))
             with open(local_file, 'rb') as f:
                 file_contents = io.BytesIO(f.read())
             size = os.path.getsize(local_file)
@@ -99,13 +93,13 @@ if __name__ == '__main__':
     with open('../config/def.yaml', 'r') as file:
         config = yaml.safe_load(file)
     config = Box(config, box_dots=True)
-    local_dirs = [config.log_directory + "/" + node for node in config.node_dirs]
+    local_dirs = [config.log_directory + "/" + dir + "/" + subdir
+                  for dir in config.subdirs.keys()
+                  for subdir in config.subdirs[dir]]
     s3_sync = S3Sync(profile_name=config.profile_name,
                      local_dirs=local_dirs,
-                     bucket_name=config.s3_bucket, s3_prefix=config.s3_logdir)
-    # s3_sync.sync()
-    print(type(config.subdirs))
-    print([config.log_directory + "/" + dir + "/" + subdir
-           for dir in config.subdirs.keys()
-           for subdir in config.subdirs[dir]])
+                     bucket_name=config.s3_bucket,
+                     s3_prefix=config.s3_logdir,
+                     log_dir=config.log_directory)
+    s3_sync.sync()
 
